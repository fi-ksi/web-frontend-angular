<ksi-admin-sidebar></ksi-admin-sidebar>
<div class="content-container">
  <div class="content">
    <h2 class="title">{{'admin.instance-config.title'|translate}}</h2>

    <table class="table table-striped table-responsive-md tasks-table" ksiTheme>
      <thead>
      <tr class="table-head-row">
        <th scope="col">{{'admin.instance-config.key' | translate}}</th>
        <th scope="col">{{'admin.instance-config.value' | translate}}</th>
        <th scope="col">{{'admin.instance-config.actions' | translate}}</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let config of (config$ | async)">
        <td>{{config.key}}</td>
        <td>
          <span *ngIf="config.value">
            {{config.value}}
          </span>
          <span *ngIf="!config.value">
            <i>{{'admin.instance-config.null-value' | translate}}</i>
          </span>
        </td>
        <td>
          <button class="btn btn-outline-primary" (click)="editConfig(config)">{{'admin.instance-config.edit' | translate}}</button>
        </td>
      </tbody>
    </table>
  </div>
</div>

<ng-template #modalEditConfig>
  <form class="form" *ngIf="editedConfig">
    <div class="form-group">
      <label for="key">{{'admin.instance-config.key' | translate}}</label>
      <input type="text" class="form-control" id="key" name="key" [(ngModel)]="editedConfig.key" disabled>
    </div>
    <div class="form-group">
      <label for="value">{{'admin.instance-config.value' | translate}}</label>
      <input type="text" class="form-control" id="value" name="value" [(ngModel)]="editedConfig.value">
    </div>
    <button [disabled]="!editedConfig" type="submit" class="btn btn-primary" (click)="saveConfig(editedConfig)">{{'admin.instance-config.save' | translate}}</button>
  </form>
</ng-template>
